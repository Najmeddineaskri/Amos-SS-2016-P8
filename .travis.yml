sudo: required

services:
 - docker
 
language: android
android:
  components:
    - build-tools-23.1
    - android-23

before_script:
  - npm install -g cordova ionic
  - npm install -g gulp
  - cd proof-of-concept/conference-app/
  - chmod +x hooks/after_prepare/010_add_platform_class.js
  - cordova platform add android --save
  - npm install --save
  - chmod +x docker/build
  
script:   
 - docker/build

after_script:
 - docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
 - docker pull hannesd/amos-downloader-image:1.0
 - docker build -t clemenshuebner/amos-ss16-proj8:1.0 docker/
 - docker push clemenshuebner/amos-ss16-proj8:1.0
 - echo "Finished deployment to Docker"
